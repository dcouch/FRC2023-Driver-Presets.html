<!DOCTYPE html>
<html>
<head>


<style>

.topButtonsTemplate {
    width:24%;
    height:14%;
    position: absolute;
    font-size: 32px;
    border: solid 5px black;
}
#cube_pickup {
    top:.5%;
    left:.5%;
    background: blueviolet;
}
#cone_pickup_side {
    top:.5%;
    left:25.5%;
    background: yellow;
}
#cone_pickup_ground {
    top:.5%;
    left:50.5%;
    background: yellow;
}
#cone_pickup_shelf {
    top:.5%;
    left:75.5%;
    background: yellow;
}
#mid_grid {
    top:15%;
    left:.5%;
    background: #9af773;
}
#high_grid {
    top:15%;
    left:25.5%;
    background: #9af773;
}
#arm_storage_traversal {
    top:15%;
    left:50.5%;
    background: #9af773;
}
#arm_storage_start {
    top:15%;
    left:75.5%;
    background: #9af773;
}

.bottomButtonsTemplateCones {
    width:10.75%;
    height:10%;
    position: absolute;
    border: solid 1px black;
    background: yellow;
}
.placeConeA1 {
    bottom:.5%;
    left:.75%;
}
.placeConeA2 {
    bottom:11%;
    left:.75%;
}
.placeConeC1 {
    bottom:.5%;
    left:22.75%;
}
.placeConeC2 {
    bottom:11%;
    left:22.75%;
}
.placeConeD1 {
    bottom:.5%;
    left:33.75%;
}
.placeConeD2 {
    bottom:11%;
    left:33.75%;
}
.placeConeF1 {
    bottom:.5%;
    left:55.75%;
}
.placeConeF2 {
    bottom:11%;
    left:55.75%;
}
.placeConeG1 {
    bottom:.5%;
    left:66.75%;
}
.placeConeG2 {
    bottom:11%;
    left:66.75%;
}
.placeConeI1 {
    bottom:.5%;
    left:88.75%;
}
.placeConeI2 {
    bottom:11%;
    left:88.75%;
}
.bottomButtonsTemplateCubes {
    width:10.75%;
    height:10%;
    position: absolute;
    border: solid 1px black;
    background: blueviolet;
}

.placeCubeA3 {
    bottom:21.5%;
    left:.75%;
}
.placeCubeB1 {
    bottom:.5%;
    left:11.75%;
}
.placeCubeB2 {
    bottom:11%;
    left:11.75%;
}
.placeCubeB3 {
    bottom:21.5%;
    left:11.75%;
}
.placeCubeC3 {
    bottom:21.5%;
    left:22.75%;
}
.placeCubeD3 {
    bottom:21.5%;
    left:33.75%;
}
.placeCubeE1 {
    bottom:.5%;
    left:44.75%;
}
.placeCubeE2 {
    bottom:11%;
    left:44.75%;
}
.placeCubeE3 {
    bottom:21.5%;
    left:44.75%;
}
.placeCubeF3 {
    bottom:21.5%;
    left:55.75%;
}
.placeCubeG3 {
    bottom:21.5%;
    left:66.75%;
}
.placeCubeH1 {
    bottom:.5%;
    left:77.75%;
}
.placeCubeH2 {
    bottom:11%;
    left:77.75%;
}
.placeCubeH3 {
    bottom:21.5%;
    left:77.75%;
}
.placeCubeI3 {
    bottom:21.5%;
    left:88.75%;
}
</style>

</head>
<body>
<!-- V  Top Intake buttons  V -->

<button id="cube_pickup" class="topButtonsTemplate cubePickup" onclick="clickButton()">Cube Pickup</button>
<button id="cone_pickup_side" class="topButtonsTemplate conePickupGroundOnSide"onclick="clickButton()">Cone Pickup (Ground, Sideways)</button>
<button id="cone_pickup_ground" class="topButtonsTemplate conePickupGroundUpright"onclick="clickButton()">Cone Pickup (Ground, Upright)</button>
<button id="cone_pickup_shelf" class="topButtonsTemplate conePickupShelf"onclick="clickButton()">Cone Pickup (Shelf)</button>
<button id="mid_grid" class="topButtonsTemplate midGrid"onclick="clickButton()"onclick="clickButton()">Mid Grid</button>
<button id="high_grid" class="topButtonsTemplate highGrid"onclick="clickButton()"onclick="clickButton()">High Grid</button>
<button id="arm_storage_traversal" class="topButtonsTemplate armStorageFieldTraversal"onclick="clickButton()">Arm Storage (Field Traversal)</button>
<button id="arm_storage_start" class="topButtonsTemplate armStorageInsideFrame"onclick="clickButton()">Arm Storage (In Frame)</button>

<!-- ^  Top Intake Buttons  ^ -->
<!-- V  Cone Buttons  V -->

<button class="bottomButtonsTemplateCones placeConeA1"></button>
<button class="bottomButtonsTemplateCones placeConeA2"></button>
<button class="bottomButtonsTemplateCones placeConeC1"></button>
<button class="bottomButtonsTemplateCones placeConeC2"></button>
<button class="bottomButtonsTemplateCones placeConeD1"></button>
<button class="bottomButtonsTemplateCones placeConeD2"></button>
<button class="bottomButtonsTemplateCones placeConeF1"></button>
<button class="bottomButtonsTemplateCones placeConeF2"></button>
<button class="bottomButtonsTemplateCones placeConeG1"></button>
<button class="bottomButtonsTemplateCones placeConeG2"></button>
<button class="bottomButtonsTemplateCones placeConeI1"></button>
<button class="bottomButtonsTemplateCones placeConeI2"></button>
<!-- ^  Cone Buttons  ^ -->
<!-- V  Cube Buttons  V -->

<button class="bottomButtonsTemplateCubes placeCubeA3"></button>
<button class="bottomButtonsTemplateCubes placeCubeB1"></button>
<button class="bottomButtonsTemplateCubes placeCubeB2"></button>
<button class="bottomButtonsTemplateCubes placeCubeB3"></button>
<button class="bottomButtonsTemplateCubes placeCubeC3"></button>
<button class="bottomButtonsTemplateCubes placeCubeD3"></button>
<button class="bottomButtonsTemplateCubes placeCubeE1"></button>
<button class="bottomButtonsTemplateCubes placeCubeE2"></button>
<button class="bottomButtonsTemplateCubes placeCubeE3"></button>
<button class="bottomButtonsTemplateCubes placeCubeF3"></button>
<button class="bottomButtonsTemplateCubes placeCubeG3"></button>
<button class="bottomButtonsTemplateCubes placeCubeH1"></button>
<button class="bottomButtonsTemplateCubes placeCubeH2"></button>
<button class="bottomButtonsTemplateCubes placeCubeH3"></button>
<button class="bottomButtonsTemplateCubes placeCubeI3"></button>

<!-- ^  Cube Buttons  ^ -->
<script>
</script>
<script>
class Data {
  constructor(cube_pickup, cone_pickup_ground, cone_pickup_side, cone_pickup_shelf, mid_grid, high_grid, arm_storage_traversal, arm_storage_start, auto_place) {
      this.cube_pickup = cube_pickup;
      this.cone_pickup_ground = cone_pickup_ground;
      this.cone_pickup_side = cone_pickup_side;
      this.cone_pickup_shelf = cone_pickup_shelf;
      this.mid_grid = mid_grid;
      this.high_grid = high_grid;
      this.arm_storage_traversal;
      this.arm_storage_start;
      this.auto_place = [auto_place[0], auto_place[1], auto_place[2]];

  }
}

function clickButton() {
  console.log("hi");
  document.write(event.target.id);
  websocket.send('{"name":' + id + '}');
}

onload="main()">
<div id="main-container">
    <div id="pose-container">
        <p id="x">x position</p>
        <p id="y">y position</p>
        <p id="rot">rotation</p>
    </div>
    <div id="canvas-container">
        <canvas id="canvas" width="1500" height="500"></canvas>
    </div>
</div>

</script>
</body>
<style>
body {
overflow: hidden;
}
#main-container {
width: 100%;
height: 100%;
position: absolute;
display: inline-block;
padding: 20px;
}
#canvas-container {
position: relative;
width: auto;
height: 100%;
float: right;
right: 0px;
margin-right: 50px;
}
#pose-container {
float: left;
left: 0px;
width: 200px;
height: 100%;
}
#canvas {
background-color: #ededed;
border: 3px solid #4d4d4d;
border-radius: 15px;
position: relative;
left: 50%;
top: 50%;
transform: translate(-50%, -50%);
}
#robot {
display: none;
}
</style>
<script type="text/javascript">

class Point {
    constructor(x ,y) {
        this.x = parseFloat(x); //Because otherwise javascript makes them STRINGS...*angry programmer noises*
        this.y = parseFloat(y);
    }
    static rotate(point, angle) {
        const x = point.x * Math.cos(angle) - point.y * Math.sin(angle);
        const y = point.x * Math.sin(angle) + point.y * Math.cos(angle);
        return new Point(x, y)
    }
    static offsetRotate(point, angle, offsetPoint) {
        var rotatedPoint = this.rotate(point, angle);
        return new Point(offsetPoint.x + rotatedPoint.x, offsetPoint.y + rotatedPoint.y);
    }
}
class Rectangle {
    constructor(centerPoint, width, height, rotationAngle) {
        this.centerPoint = centerPoint;
        this.width = width;
        this.height = height;
        this.rotationAngle = rotationAngle;
        this.point1 = Point.offsetRotate(new Point(width / 2, height / 2), rotationAngle, centerPoint); //goes from top right to bottom right like the 4 quadrants of the coordinate plane
        this.point2 = Point.offsetRotate(new Point(-1 * width / 2, height / 2), rotationAngle, centerPoint);
        this.point3 = Point.offsetRotate(new Point(-1 * width / 2, -1 * height / 2), rotationAngle, centerPoint);
        this.point4 = Point.offsetRotate(new Point(width / 2, -1 * height / 2), rotationAngle, centerPoint);
    }
}

class DrawUtils {
    canvasWidth;
    canvasHeight;
    static roundPrecise(number, precision) {
        return Math.round(number * 10**precision) / 10**precision
    }
    static setInfo(width, height) {
        this.canvasWidth = width;
        this.canvasHeight = height;
    }
    static clearCanvas(canvas) {
        canvas.clearRect(0, 0, this.canvasWidth, this.canvasHeight);
    }
    static convertX(x) {
        return this.roundPrecise(x + this.canvasWidth / 2, 0);
    }
    static convertY(y) {
        return this.roundPrecise(this.canvasHeight / 2 - y, 0);
    }
    static resizeCanvas(canvas) {
        canvas.width = window.innerWidth * 0.7;
        canvas.height = window.innerHeight * 0.8;
    }

    static drawRobot(canvas, rectangle) {
        this.clearCanvas(canvas, this.canvasWidth, this.canvasHeight);
        canvas.fillStyle = "#000000";
        canvas.beginPath();
        canvas.moveTo(this.convertX(rectangle.point1.x), this.convertY(rectangle.point1.y));
        canvas.lineTo(this.convertX(rectangle.point2.x), this.convertY(rectangle.point2.y));
        canvas.lineTo(this.convertX(rectangle.point3.x), this.convertY(rectangle.point3.y));
        canvas.lineTo(this.convertX(rectangle.point4.x), this.convertY(rectangle.point4.y));
        canvas.lineTo(this.convertX(rectangle.point1.x), this.convertY(rectangle.point1.y));
        canvas.closePath();
        canvas.fill();
    }
}
function main() {
    var canvasContainer = document.getElementById("canvas-container");
    var canvas = document.getElementById("canvas");
    DrawUtils.resizeCanvas(canvas);
    addEventListener("resize", (event) => DrawUtils.resizeCanvas(canvas));
    var ctx = canvas.getContext("2d");
    ctx.imageSmoothingEnabled = false;
    var x = document.getElementById("x");
    var y = document.getElementById("y");
    var rot = document.getElementById("rot");
    try {
        socket = new WebSocket("ws://127.0.0.1:5801");
        socket.onopen = function(openEvent) {
            console.log("socket opened")
            };
        socket.onmessage = function(messageEvent) {
            var json = JSON.parse(messageEvent.data);
            DrawUtils.setInfo(canvas.width, canvas.height);
            DrawUtils.drawRobot(ctx, new Rectangle(new Point(json.x, json.y), 30, 50, json.rot))
            x.innerHTML = "x: " + json.x;
            y.innerHTML = "y: " + json.y;
            rot.innerHTML = "rotation: " + json.rot;
            };
        } catch (exception) {
        console.log(exception);
        }
    }
</script>
</html>